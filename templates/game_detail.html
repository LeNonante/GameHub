<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ game.title }} - Game Hub</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/game_detail.css') }}">
    <!-- Prism.js pour la coloration syntaxique du markdown -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header avec navigation -->
        <header class="header">
            <nav class="nav">
                <a href="{{ url_for('index') }}" class="back-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Retour
                </a>
                <div class="logo-small">
                    <span class="logo-text-small">GAME</span>
                    <span class="logo-icon-small">ðŸŽ²</span>
                    <span class="logo-text-small">HUB</span>
                </div>
            </nav>
        </header>

        <!-- Contenu principal -->
        <main class="game-detail">
            <!-- Section Hero -->
            <section class="hero">
                <div class="hero-content">
                    <div class="game-image-large">
                        <img src="{{ game.image }}" alt="{{ game.title }}" 
                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDMwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjM0E0MDUzIi8+CjxjaXJjbGUgY3g9IjE1MCIgY3k9IjE1MCIgcj0iNjAiIGZpbGw9IiM2Mzc2OTQiLz4KPHN2Zz4K'">
                    </div>
                    <div class="hero-info">
                        <h1 class="game-title-large">{{ game.title }}</h1>
                        <p class="game-description-large">{{ game.description }}</p>
                        
                        <!-- Informations sur les joueurs -->
                        <div class="players-info">
                            <div class="players-badge">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                    <circle cx="12" cy="7" r="4"/>
                                </svg>
                                <span>
                                    {% if game.min_players == game.max_players %}
                                        {{ game.min_players }} joueur{% if game.min_players > 1 %}s{% endif %}
                                    {% else %}
                                        {{ game.min_players }} - {{ game.max_players }} joueurs
                                    {% endif %}
                                </span>
                            </div>
                        </div>

                        <!-- encadrÃ© pour crÃ©ation/join partie -->
                        <div class="game-actions-box">
                            <div class="game-actions-row">
                                <input type="text" id="pseudoInput" class="game-input" placeholder="Votre pseudo">
                            </div>
                            <div class="game-actions-row">
                                <button class="action-button" onclick="createGame({{ game.id }})">CrÃ©er une partie</button>
                            </div>
                            <div class="game-actions-row">
                                <input type="text" id="codeInput" class="game-input" placeholder="Code de la partie">
                                <button class="action-button" onclick="joinGame()">Rejoindre une partie</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section des rÃ¨gles -->
            <section class="rules-section">
                <div class="section-header">
                    <h2>RÃ¨gles du jeu</h2>
                    <div class="section-divider"></div>
                </div>
                
                <div class="rules-content">
                    <div class="rules-container">
                        {{ game.rules_html | safe }}
                    </div>
                </div>
            </section>
        </main>
    </div>

    
    <script>
    function joinGame() {
        fetch("/createorjoingame", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({pseudo: "AurÃ©lien"})
        })
        .then(res => res.json())
        .then(data => alert(data.message));
    }
    </script>


</body>
</html>